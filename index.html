<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="calendar.css">
  </head>
  <body>
    <div class="calendar">
      <div class="container">
        <div class="caltitle">
          カレンダー
        </div>
        <div class="container">
          <div class="inblock">
            <p id="fullDate1"></p>
          </div>
          <div class="calbar">
            <button id="prev-month">&lt;</button>
              <span id="japanese-month"></span>
            <button id="next-month">&gt;</button>
          </div>
        </div>
      </div>
      <div class="date">
        <span id="fullDate2"></span>
      </div>
      <div class="space"></div>
      <div class="days-of-week">
        <div class="day-of-week">月</div>
        <div class="day-of-week">火</div>
        <div class="day-of-week">水</div>
        <div class="day-of-week">木</div>
        <div class="day-of-week">金</div>
        <div class="day-of-week">土</div>
        <div class="day-of-week">日</div>
      </div>
      <div class="days" id="calendarDays"></div>
      <div class="container">
        <div class="clock" id="clock-left"></div>
        <div class="clock" id="clock-right"></div>
      </div>
    </div>
    <script src="calendar.js"></script>

<script src="calendar.js"></script>

<script>
  NekoType = "blue";
</script>
<script src="https://webneko.net/n20171213.js"></script>

<script>
  function findNekoElement() {
    // 1) lo típico
    let el = document.getElementById("neko");
    if (el) return el;

    // 2) otras variantes / o directamente la imagen del webneko
    el = document.querySelector(".neko");
    if (el) return el;

    el = document.querySelector('img[src*="webneko"]');
    if (el) return el;

    return null;
  }

  function getCalendarOffset() {
    const cal = document.querySelector(".calendar");
    if (!cal) return { x: 0, y: 0 };
    const r = cal.getBoundingClientRect();
    const pad = 10; // margen dentro del calendario
    return { x: r.left + pad, y: r.top + pad };
  }

  // Reaplica el offset continuamente (porque el script del neko mueve el elemento todo el rato)
  function keepNekoInsideCalendar() {
    const neko = findNekoElement();
    if (!neko) return;

    const { x, y } = getCalendarOffset();

    // si el neko ya tiene un transform, lo respetamos y añadimos translate delante
    const base = neko.style.transform || "";
    const translated = `translate(${x}px, ${y}px) ${base}`.trim();

    // fuerza el transform en línea en cada tick
    neko.style.transform = translated;
  }

  // Espera a que el neko exista y luego lo “ancla visualmente” al calendario
  const wait = setInterval(() => {
    if (findNekoElement()) {
      clearInterval(wait);
      keepNekoInsideCalendar();
      setInterval(keepNekoInsideCalendar, 50); // importante
      window.addEventListener("resize", keepNekoInsideCalendar);
      window.addEventListener("scroll", keepNekoInsideCalendar);
    }
  }, 50);
</script>
</body>
</html>


